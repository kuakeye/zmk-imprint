# enabling makes scrolling wonky
#CONFIG_ZMK_POINTING_SMOOTH_SCROLLING=n

# increase BLE power to overcome signal loss issues
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# --- BALANCED BLE LINK (snappy enough, good battery) ---
# A) Prefer ~22.5–30 ms interval, attend 1 in 5 events (latency 4), 4 s supervision
CONFIG_BT_GAP_PERIPHERAL_PREF_PARAMS=y
# 18 * 1.25ms = 22.5 ms
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=18
# 24 * 1.25ms = 30.0 ms
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=24
# skip 4 intervals, attend 5th
CONFIG_BT_PERIPHERAL_PREF_LATENCY=4
# 4.0 s
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# B) ALTERNATIVE: NO LATENCY (snappiest, but higher battery use)
# CONFIG_BT_GAP_PERIPHERAL_PREF_PARAMS=y
# 9 * 1.25ms = 11.25 ms
# CONFIG_BT_PERIPHERAL_PREF_MIN_INT=9
# 12 * 1.25ms = 15.00 ms
# CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
# attend every interval, no skipping
# CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
# 4.0 s
# CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# configs that help windows machines
# see https://zmk.dev/docs/troubleshooting/connection-issues#additional-bluetooth-options
# Keep 1M PHY for compatibility unless you know 2M is stable in your env
#CONFIG_BT_CTLR_PHY_2M=n
#CONFIG_ZMK_BLE_PASSKEY_ENTRY=y

# downshifting basically slows the trackball sensor poll rate in stages.
# see https://github.com/Cyboard-DigitalTailor/zmk-pmw3610-driver/blob/main/Kconfig
# you can configure when it downshifts and the poll rate of each stage.
CONFIG_PMW3610_RUN_DOWNSHIFT_TIME_MS=3000
CONFIG_PMW3610_REST1_DOWNSHIFT_TIME_MS=27000
CONFIG_PMW3610_REST2_DOWNSHIFT_TIME_MS=30000

# Optional: if wake feels slow after long idle, nudge REST sampling a bit:
# CONFIG_PMW3610_REST1_SAMPLE_TIME_MS=40
# CONFIG_PMW3610_REST2_SAMPLE_TIME_MS=100
# CONFIG_PMW3610_REST3_SAMPLE_TIME_MS=500

# decrease the keyboard -> computer reporting interval to 12 msec (90 Hz)
CONFIG_PMW3610_REPORT_INTERVAL_MIN=11

# --- Deep sleep (choose one timeout) ---
# A) Overnight saver (recommended) → 60 min
CONFIG_ZMK_SLEEP=y
# 60 min = 3,600,000 ms
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=3600000

# B) Balanced → 30 min
# CONFIG_ZMK_SLEEP=y
# CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=1800000

# C) Aggressive saver → 15 min
# CONFIG_ZMK_SLEEP=y
# CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=900000
